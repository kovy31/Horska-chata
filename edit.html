<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editace – pokoje, platby, vratky</title>
  <link rel="stylesheet" href="./assets/style.css?v=20260212-4" />
</head>
<body>
  <div class="container">
    <div class="headerRow">
      <div>
        <h1>Editace</h1>
        <div class="sub">Zapsaní lidé v pokojích = potvrzení účastníci. Platby a vratky eviduješ jako historii (částka + datum).</div>
      </div>
      <div class="sub"><a href="./index.html">← Zobrazení</a></div>
    </div>

    <div class="panel">
      <div class="panelGrid">
        <div>
          <label class="label">Celková cena (Kč)</label>
          <input id="inpTotal" type="number" min="1" step="1" autocomplete="off" />
        </div>

        <div>
          <label class="label">Skutečná cena (Kč) – po zaplacení chaty</label>
          <input id="inpActualCzk" type="number" min="0" step="1" placeholder="ponech prázdné dokud není chata zaplacena" />
          <div class="subSmall">Pokud je vyplněno, všechny výpočty se řídí touto cenou. Jinak se používá odhadovaná cena navýšená o 5 %.</div>
        </div>

        <div>
          <label class="label">Číslo účtu</label>
          <input id="inpAccount" type="text" placeholder="např. 123456789/0100" />
          <div class="subSmall">Zobrazuje se ve financích na hlavní stránce.</div>
        </div>
        <div>
          <label class="label">Text u ubytování (volitelné)</label>
          <textarea id="inpAirNote" rows="3" placeholder="Např. info k check-inu, rozdělení, poznámka…"></textarea>
          <div class="subSmall">Zobrazuje se nad Airbnb kartou na hlavní stránce.</div>
        </div>

        <div>
          <label class="label">Adresa pro mapu (volitelné)</label>
          <input id="inpMapAddress" type="text" placeholder="Např. Tignes, France" />
          <div style="margin-top:6px;">
            <label class="label" style="display:inline; margin-right:8px;">Zoom mapy</label>
            <input id="inpMapZoom" type="range" min="3" max="18" value="14" style="width:140px; vertical-align:middle;" />
            <span id="mapZoomVal" style="font-size:12px; margin-left:4px;">14</span>
          </div>
          <div class="subSmall">Google Maps se zobrazí pod Airbnb kartou.</div>
        </div>

        <div>
          <label class="label">Text pod mapou (volitelné)</label>
          <textarea id="inpMapNote" rows="2" placeholder="Např. přesná adresa ubytování…"></textarea>
          <div class="subSmall">Zobrazí se pod mapou na hlavní stránce. Může být dočasně prázdné.</div>
        </div>

        <div>
          <label class="label">Červený banner (volitelné)</label>
          <textarea id="inpBanner" rows="2" placeholder="Např. Potřebujeme 10 lidí na zaplacení chaty…"></textarea>
          <div style="margin-top:6px;">
            <label><input type="checkbox" id="inpBannerVisible" /> Zobrazit banner na hlavní stránce</label>
          </div>
          <div class="subSmall">Červený informační pruh nad sekcí „Kdo jede".</div>
        </div>

        <div>
          <label class="label">GitHub token (pro uložení)</label>
          <input id="inpToken" type="text" autocomplete="off" placeholder="Fine-grained PAT" style="-webkit-text-security:disc;" />
          <div class="subSmall">Token se neukládá – zadává se jen lokálně v prohlížeči.</div>
        </div>
      </div>

      <div class="btnRow">
        <button class="btn" id="btnLoad">Načíst</button>
        <button class="btn primary" id="btnSave">Uložit</button>
      </div>
    </div>

    <div class="section">
      <div class="sectionHead">
        <div>
          <div class="sectionTitle">Pokoje</div>
          <div class="sectionSub">Vyplň jména lidí v pokojích. Prázdné pole = nikdo.</div>
        </div>
      </div>

      <div id="editGrid" class="editGrid"></div>

      <!-- Unassigned people (parked outside rooms) -->
      <div id="unassignedWrap" style="display:none; margin-top:14px;">
        <div class="roomEdit">
          <div class="roomEditTop">
            <div>
              <div class="roomEditName">Nepřiřazení</div>
              <div class="roomEditMeta">Lidé mimo pokoje – čekají na přiřazení</div>
            </div>
          </div>
          <div id="unassignedList" class="slots"></div>
          <div style="margin-top:8px;">
            <div class="slotRow">
              <input id="inpUnassignedAdd" type="text" placeholder="přidat jméno…" />
              <button class="btn" id="btnUnassignedAdd" type="button">Přidat</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="sectionHead">
        <div>
          <div class="sectionTitle">Platby & vratky</div>
          <div class="sectionSub">Klikni na jméno a zapiš platby / vratky jako historii.</div>
        </div>

        <div class="kpiMini">
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Zaplaceno</div>
            <div class="kpiMiniValue" id="kpiPaid">—</div>
          </div>
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Vráceno</div>
            <div class="kpiMiniValue" id="kpiRefunded">—</div>
          </div>
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Přebytek</div>
            <div class="kpiMiniValue" id="kpiSurplus">—</div>
          </div>
        </div>
      </div>

      <div class="adminLayout">
        <div class="adminLeft">
          <table class="table" id="adminTable">
            <thead>
              <tr>
                <th>Jméno</th>
                <th>Pokoj</th>
                <th>Má platit</th>
                <th>Zaplaceno</th>
                <th>Vráceno</th>
                <th>Reálně uhrazeno</th>
                <th>K vrácení</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="subSmall" id="adminEmpty" style="display:none; margin-top:10px;">Zatím nejsou vyplněná žádná jména v pokojích.</div>
        </div>

        <div class="adminRight">
          <div class="panel small">
            <div class="panelTitle" id="selTitle">—</div>
            <div class="panelSub" id="selMeta">—</div>

            <div class="subSmall" id="suggestHint" style="margin:10px 0 6px 0; display:none;"></div>

            <div class="twoCols">
              <div>
                <div class="label">Přidat platbu</div>
                <div class="row">
                  <input id="suggestPay" type="number" min="0" step="1" placeholder="částka" />
                  <input id="suggestPayDate" type="date" />
                  <button class="btn" id="btnAddPay">Přidat</button>
                </div>
              </div>

              <div>
                <div class="label">Přidat vratku</div>
                <div class="row">
                  <input id="suggestRefund" type="number" min="0" step="1" placeholder="částka" />
                  <input id="suggestRefundDate" type="date" />
                  <button class="btn" id="btnAddRefund">Přidat</button>
                </div>
              </div>
            </div>

            <div class="subSmall" style="margin-top:12px;">U platby i vratky můžeš rovnou nastavit datum. Když datum necháš prázdné, použije se dnešek.</div>

            <div class="hr"></div>

            <div class="label" style="margin-bottom:6px;">Historie plateb</div>
            <div id="payListAdmin"></div>

            <div class="hr"></div>

            <div class="label" style="margin-bottom:6px;">Historie vratek</div>
            <div id="refundListAdmin"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="./assets/config.js?v=20260212-4"></script>
  <script src="./assets/common.js?v=20260212-4"></script>
  <script src="./assets/edit.js?v=20260212-5"></script>
</body>
</html>
