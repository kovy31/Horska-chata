<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editace – pokoje, platby, vratky</title>
  <link rel="stylesheet" href="./assets/style.css?v=20260211-4" />
</head>
<body>
  <div class="container">
    <div class="headerRow">
      <div>
        <h1>Editace</h1>
        <div class="sub">Zapsaní lidé v pokojích = potvrzení účastníci. Platby a vratky eviduješ jako historii (částka + datum).</div>
      </div>
      <div class="sub"><a href="./index.html">← Zobrazení</a></div>
    </div>

    <div class="panel">
      <div class="panelGrid">
        <div>
          <label class="label">Celková cena (Kč)</label>
          <input id="inpTotal" type="number" min="1" step="1" />
        </div>

        <div>
          <label class="label">Číslo účtu</label>
          <input id="inpAccount" type="text" placeholder="např. 123456789/0100" />
          <div class="subSmall">Zobrazuje se ve financích na hlavní stránce.</div>
        </div>
        <div>
          <label class="label">Text u ubytování (volitelné)</label>
          <textarea id="inpAirNote" rows="3" placeholder="Např. info k check-inu, rozdělení, poznámka…"></textarea>
          <div class="subSmall">Zobrazuje se nad Airbnb kartou na hlavní stránce.</div>
        </div>

        <div>
          <label class="label">GitHub token (pro uložení)</label>
          <input id="inpToken" type="password" placeholder="Fine-grained PAT" />
          <div class="subSmall">Token se neukládá – zadává se jen lokálně v prohlížeči.</div>
        </div>
      </div>

      <div class="btnRow">
        <button class="btn" id="btnLoad">Načíst</button>
        <button class="btn primary" id="btnSave">Uložit</button>
      </div>
    </div>

    <div class="section">
      <div class="sectionHead">
        <div>
          <div class="sectionTitle">Pokoje</div>
          <div class="sectionSub">Vyplň jména lidí v pokojích. Prázdné pole = nikdo.</div>
        </div>
      </div>

      <div id="editGrid" class="editGrid"></div>
    </div>

    <div class="section">
      <div class="sectionHead">
        <div>
          <div class="sectionTitle">Platby & vratky</div>
          <div class="sectionSub">Klikni na jméno a zapiš platby / vratky jako historii.</div>
        </div>

        <div class="kpiMini">
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Zaplaceno</div>
            <div class="kpiMiniValue" id="kpiPaid">—</div>
          </div>
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Vráceno</div>
            <div class="kpiMiniValue" id="kpiRefunded">—</div>
          </div>
          <div class="kpiMiniItem">
            <div class="kpiMiniLabel">Přebytek</div>
            <div class="kpiMiniValue" id="kpiSurplus">—</div>
          </div>
        </div>
      </div>

      <div class="adminLayout">
        <div class="adminLeft">
          <table class="table" id="adminTable">
            <thead>
              <tr>
                <th>Jméno</th>
                <th>Pokoj</th>
                <th>Zaplaceno</th>
                <th>Vráceno</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="subSmall" id="adminEmpty" style="display:none; margin-top:10px;">Zatím nejsou vyplněná žádná jména v pokojích.</div>
        </div>

        <div class="adminRight">
          <div class="panel small">
            <div class="panelTitle" id="selTitle">—</div>
            <div class="panelSub" id="selMeta">—</div>

            <div class="subSmall" id="suggestHint" style="margin:10px 0 6px 0; display:none;"></div>

            <div class="twoCols">
              <div>
                <div class="label">Přidat platbu</div>
                <div class="row">
                  <input id="suggestPay" type="number" min="0" step="1" placeholder="částka" />
                  <button class="btn" id="btnAddPay">Přidat</button>
                </div>
              </div>

              <div>
                <div class="label">Přidat vratku</div>
                <div class="row">
                  <input id="suggestRefund" type="number" min="0" step="1" placeholder="částka" />
                  <button class="btn" id="btnAddRefund">Přidat</button>
                </div>
              </div>
            </div>

            <div class="subSmall" style="margin-top:12px;">Datum se nastaví na dnešek. V historii pak můžeš upravit.</div>

            <div class="hr"></div>

            <div class="label" style="margin-bottom:6px;">Historie plateb</div>
            <div id="payListAdmin"></div>

            <div class="hr"></div>

            <div class="label" style="margin-bottom:6px;">Historie vratek</div>
            <div id="refundListAdmin"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="./assets/config.js?v=20260211-2"></script>
  <script src="./assets/common.js?v=20260211-2"></script>
  <script src="./assets/edit.js?v=20260211-2"></script>
</body>
</html>
