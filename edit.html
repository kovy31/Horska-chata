<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editace – obsazení & platby</title>
  <link rel="stylesheet" href="./assets/style.css?v=20260210-6" />
</head>
<body>
  <div class="container">
    <div class="headerRow">
      <div>
        <h1>Editace</h1>
        <div class="sub">Obsazení pokojů + evidence plateb (jen lidé zapsaní v pokojích).</div>
      </div>
      <div class="sub"><a href="./index.html">← Zobrazení</a></div>
    </div>

    <div class="panel">
      <div class="panelGrid">
        <div>
          <label class="label">Celková cena (Kč)</label>
          <input id="inpTotal" type="number" min="1" step="1" />
        </div>

        <div>
          <label class="label">Dětský pokoj</label>
          <div class="subSmall">Sleva 25 % (koeficient 0.75)</div>
          <input id="inpKids" type="number" min="0.1" max="1" step="0.01" />
        </div>

        <div>
          <label class="label">Číslo účtu (pro platby)</label>
          <input id="inpAccount" type="text" placeholder="např. 123456789/0100" />
          <div class="subSmall">Ukládá se do GitHubu a zobrazuje se v sekci Finance.</div>
        </div>

        <div>
          <label class="label">GitHub token (pro uložení)</label>
          <input id="inpToken" type="password" placeholder="Fine-grained PAT (Issues: Read/Write)" />
          <div class="subSmall">Token se nikam nezapisuje do repa. Slouží jen pro PATCH do Issue.</div>
        </div>
      </div>

      <div class="btnRow">
        <button class="btn" id="btnLoad">Načíst</button>
        <button class="btn primary" id="btnSave">Uložit</button>
      </div>
    </div>

    <div class="twoCol">
      <div>
        <h2 class="h2">Pokoje</h2>
        <div class="sub">Zapsaní lidé = potvrzení účastníci.</div>
        <div class="grid" id="editGrid"></div>
      </div>

      <div>
        <h2 class="h2">Platby</h2>
        <div class="sub">Zde zapisuješ, kdo kolik poslal. Systém ukáže doplatek / přeplatek (vratku).</div>

        <div class="kpi smallKpi">
          <div class="item">
            <div class="label">Celkem zaplaceno</div>
            <div class="value" id="kpiPaid">—</div>
          </div>
          <div class="item">
            <div class="label">Chybí vybrat</div>
            <div class="value" id="kpiNeed">—</div>
          </div>
          <div class="item">
            <div class="label">Vrátit celkem</div>
            <div class="value" id="kpiRefund">—</div>
          </div>
        </div>

        <div class="tableWrap">
          <div class="desktopTable" style="display:block;">
            <table class="table" id="payEditTable">
              <thead>
                <tr>
                  <th>Jméno</th>
                  <th>Pokoj</th>
                  <th>Má platit</th>
                  <th>Zaplaceno</th>
                  <th>Stav</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="subSmall" id="payEmpty" style="display:none; margin-top:10px;">
            Zatím nikdo není zapsaný v pokojích.
          </div>
        </div>
      </div>
    </div>

    <div class="footer subSmall">
      Tip: Zaškrtni „Zaplaceno“ → automaticky se vyplní částka „má platit“, pak jen ulož.
    </div>
  </div>

  <script src="./assets/config.js?v=20260210-6"></script>
  <script src="./assets/common.js?v=20260210-6"></script>
  <script src="./assets/edit.js?v=20260210-6"></script>
</body>
</html>
